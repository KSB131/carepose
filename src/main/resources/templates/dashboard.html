<!DOCTYPE html>
<html lang="ko">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ê´€ë¦¬ ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ</title>
   <!-- Bootstrap 5 CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
   <!-- Custrom CSS (Optional, keeping if needed for specific overrides) -->
   <link rel="stylesheet" th:href="@{/css/style.css}">

</head>
<style>

/* ìŠ¤íƒ€ì¼ íƒœê·¸ ì•ˆì— ì¶”ê°€ */
#clock {
    font-family: 'Courier New', Courier, monospace; /* ìˆ«ì í­ì„ ì¼ì •í•˜ê²Œ ìœ ì§€ */
    font-weight: bold;
    margin-left: 5px;
}
	/* ë°•ìŠ¤ì™€ ë°•ìŠ¤ ê°„ê²© */
    .sensor-widget {
        margin-bottom: -40px;
    }
    
    .sensor-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        transition: transform 0.2s;
        height: 80px;
    }
    
    .sensor-card * {
	    line-height: 1;
	}
    
    .sensor-card .card-body {
	    padding: 0.05rem 0.4rem;  /* ìœ„ì•„ë˜ / ì¢Œìš° */
	    height: 100%;
	    
	    display: flex;
	    flex-direction: column;
	    justify-content: center;
	    align-items: center;
	}
	
	.sensor-title,
	.sensor-unit {
	    margin: 0;
	    padding: 0;
	}
    
    .sensor-card:hover {
        transform: translateY(-3px);
    }
    
    .sensor-value {
        font-size: 1.5rem;
        font-weight: bold;
    }
    
  
</style>

<body class="bg-light">

   <div class="container-fluid">
      <div class="row">
         <!-- Sidebar -->
         <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse p-0">
         <div class="position-sticky pt-4 px-3">
            <div class="mb-4">
               <h5 class="fw-bold text-white">
                  SMHRD ìš”ì–‘ë³‘ì›<br>ì•ˆì „ ê´€ì œì‹œìŠ¤í…œ
               </h5>
            </div>
               <ul class="nav flex-column">
	               <li class="nav-item">
	                  <a class="nav-link" th:href="@{/dashboard}"
	                  	th:classappend="${requestURI.contains('/dashboard')} ? 'active'">
	                     <i class="bi bi-speedometer2 me-2"></i>ëŒ€ì‹œë³´ë“œ
	                  </a>
	               </li>
	               <li class="nav-item">
	                  <a class="nav-link" th:href="@{/patients}"
	                  	th:classappend="${requestURI.contains('/patients')} ? 'active'">
	                     <i class="bi bi-hospital me-2"></i>ë³‘ì‹¤ í˜„í™©
	                  </a>
	               </li>
	               <li class="nav-item">
	                  <a class="nav-link" th:href="@{/rooms}"
	                  	th:classappend="${requestURI.contains('/rooms')} ? 'active'">
	                     <i class="bi bi-camera-video me-2"></i>ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
	                  </a>
	               </li>
	               <li class="nav-item">
	                  <a class="nav-link"
	                  	th:classappend="${requestURI.contains('/alerts')} ? 'active'">
	                     <i class="bi bi-bell me-2"></i>ì•Œë¦¼ ì„¼í„°
	                  </a>
	               </li>
	            </ul>
               <div class="mt-5 px-3">
                  <span class="small text-muted" style="color: silver !important;">carepose 1.0.0</span>
               </div>
            </div>
         </nav>

         <!-- Main Content -->
         <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
         
         	<div class="page-header d-flex align-items-center">

	               <div>
	                  <h1 class="page-title mb-1">6ë³‘ë™</h1>
	                  <p class="text-muted mb-0">í™˜ì ëª¨ë‹ˆí„°ë§ í˜„í™©</p>
               </div>
               <div class="container">
  
<!-- ì˜¨ìŠµë„ ë°•ìŠ¤ -->
<div class="sensor-widget">
    <div class="d-flex gap-2 justify-content-end"> 
    
    	<!-- ì˜¨ë„ ë°•ìŠ¤ -->
    	<div style="width: 120px;"> 
    		<div class="card sensor-card" style="background: linear-gradient(135deg, #f2d383 0%, #ed966b 100%);">
                <div class="card-body text-center">
                    <div class="sensor-title">ì˜¨ë„</div>
                    <div class="sensor-value" id="temperature">--</div>
                    <span class="sensor-unit">Â°C</span>
                </div>
            </div>
        </div>
        
        <!-- ìŠµë„ ë°•ìŠ¤ -->
        <div style="width: 120px;">
            <div class="card sensor-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <div class="card-body text-center">
                    <div class="sensor-title">ìŠµë„</div>
                    <div class="sensor-value" id="humidity">--</div>
                    <span class="sensor-unit">%</span>
                </div>
            </div>
        </div>

    </div>
</div>
        
        <div class="last-update">
            <span class="status "></span>
            <span id="status"></span>
        </div>
    </div>
               
               <div class="btn-toolbar mb-2 mb-md-0">
                  <div class="btn-group me-6">
                     <button type="button" class="btn btn-sm btn-secondary">í˜„ì¬ ì‹œê°„  <span id="clock">
                           </span></button>
                  </div>
               </div>
            </div>

            <!-- Status Cards -->
            <div class="row g-4 mb-4">
               <div class="col-md-3">
                  <div class="status-card h-100">
                     <span class="dot bg-primary"></span>
                     <div class="h3 fw-bold my-2">0</div>
                     <div class="text-muted">ì „ì²´ í™˜ì</div>
                  </div>
               </div>
               <div class="col-md-3">
                  <div class="status-card h-100">
                     <span class="dot bg-success"></span>
                     <div class="h3 fw-bold my-2">0</div>
                     <div class="text-muted">ì •ìƒ</div>
                  </div>
               </div>
               <div class="col-md-3">
                  <div class="status-card h-100">
                     <span class="dot bg-warning"></span>
                     <div class="h3 fw-bold my-2">0</div>
                     <div class="text-muted">ì£¼ì˜</div>
                  </div>
               </div>
               <div class="col-md-3">
                  <div class="status-card h-100">
                     <span class="dot bg-danger"></span>
                     <div class="h3 fw-bold my-2">0</div>
                     <div class="text-muted">ìœ„í—˜</div>
                  </div>
               </div>
            </div>

            <!-- Alerts Section -->
            <div class="row g-4">
               <div class="col-6">
                  <div class="card shadow-sm mb-4">
                     <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                        <h5 class="mb-0 text-secondary">ìµœê·¼ ì´ë²¤íŠ¸ </h5>
                     </div>
                     <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                           <!-- Example Alert Items -->
                          
                           <div class="list-group-item d-flex justify-content-between align-items-center">
                              <span>00:00 &nbsp; <b>601C</b> &nbsp; ë‚™ìƒ ë°œìƒ</span>
                              <button class="btn btn-sm btn btn-outline-primary ">ê¸°ë¡ í™•ì¸</button>
                           </div>
                           <div class="list-group-item d-flex justify-content-between align-items-center">
                              <span>00:00 &nbsp; <b>601C</b> &nbsp; ë‚™ìƒ ë°œìƒ</span>
                              <button class="btn btn-sm btn btn-outline-primary ">ê¸°ë¡ í™•ì¸</button>
                           </div>
                           <div class="list-group-item d-flex justify-content-between align-items-center">
                              <span>00:00 &nbsp; <b>601C</b> &nbsp; ë‚™ìƒ ë°œìƒ</span>
                              <button class="btn btn-sm btn btn-outline-primary ">ê¸°ë¡ í™•ì¸</button>
                           </div>
                           <div class="list-group-item d-flex justify-content-between align-items-center">
                              <span>00:00 &nbsp; <b>601C</b> &nbsp; ë‚™ìƒ ë°œìƒ</span>
                              <button class="btn btn-sm btn btn-outline-primary ">ê¸°ë¡ í™•ì¸</button>
                           </div>
                    
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-6">
                  <div class="card shadow-sm mb-4">
                     <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                        <h5 class="mb-0 text-secondary"> ìì„¸ ë³€ê²½ ì•Œë¦¼</h5>
                        <a href="#" class="btn btn-sm btn-outline-primary">ğŸ”” ìƒˆë¡œìš´ ì•Œë¦¼ 0ê±´</a>
                     </div>
                     <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                           <!-- Example Alert Items -->
                         
                           <div
                              class="list-group-item list-group-item-danger d-flex justify-content-between align-items-center">
                              <span>14:30 &nbsp; <b>103í˜¸ B</b> &nbsp; ì²´ìœ„ ë³€ê²½ í•„ìš” (2ì‹œê°„ ì´ˆê³¼)</span>
                              <button class="btn btn-sm btn-danger">ì²˜ë¦¬ ì™„ë£Œ</button>
                           </div>
                           <div
                              class="list-group-item list-group-item-danger d-flex justify-content-between align-items-center">
                              <span>14:30 &nbsp; <b>103í˜¸ B</b> &nbsp; ì²´ìœ„ ë³€ê²½ í•„ìš” (2ì‹œê°„ ì´ˆê³¼)</span>
                              <button class="btn btn-sm btn-danger">ì²˜ë¦¬ ì™„ë£Œ</button>
                           </div>
                           <div
                              class="list-group-item list-group-item-warning d-flex justify-content-between align-items-center">
                              <span>14:15 &nbsp; <b>101í˜¸ B</b> &nbsp; ìì„¸ ìœ ì§€ ì‹œê°„ ì£¼ì˜</span>
                              <button class="btn btn-sm btn-warning">ì²˜ë¦¬ ì™„ë£Œ</button>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

               <!-- Quick Actions / Bed Status -->
               <div class="col-lg-15">
                  <div class="row g-3">
                     <div class="col-6">
                        <div class="bed-card bed-green shadow-sm">
                           í™˜ ì ê´€ ë¦¬
                        </div>
                     </div>
                     <div class="col-6">
                        <div class="bed-card bed-red shadow-sm">
                           ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
                        </div>
                     </div>
                  </div>
               </div>
            </div>

         </main>
      </div>
   </div>

   <!-- Bootstrap 5 JS Bundle -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
<script>
        // ì„¼ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function fetchSensorData() {
            fetch('/api/sensor')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('temperature').textContent = data.temperature.toFixed(1);
                    document.getElementById('humidity').textContent = data.humidity.toFixed(1);
                    
                    const now = new Date();
                   
                })
                .catch(error => {
                    console.error('Error:', error);
                    /* document.getElementById('status').textContent = 'ë°ì´í„° ë¡œë”© ì‹¤íŒ¨'; */
                });
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ì‹¤í–‰
        fetchSensorData();
        
        // 2ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
        setInterval(fetchSensorData, 2000);
        
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ko-KR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false // 24ì‹œê°„ í˜•ì‹ì´ ê¹”ë”í•˜ë©´ false, ì˜¤ì „/ì˜¤í›„ê°€ í•„ìš”í•˜ë©´ true
            });
            document.getElementById('clock').textContent = timeString;
        }

        // 1ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
        setInterval(updateClock, 1000);
        updateClock(); // ì¦‰ì‹œ ì‹¤í–‰
        
    </script>

</html>